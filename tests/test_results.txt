LUMINATE AI - TEST RESULTS
======================================================================
Date: 2025-10-07 23:29:25
Test Suites: 5
Passed: 5
Failed: 0


======================================================================
Test Suite: test_auto_mode_router.py
Status: PASSED
======================================================================

======================================================================
AUTO MODE ROUTER TESTS
======================================================================

======================================================================
TEST 1: Auto Router Import
======================================================================
âœ… Auto router imported successfully
   Router object: <fastapi.routing.APIRouter object at 0x1011fa540>
   Routes: ['/api/auto', '/api/auto/feedback', '/api/auto/stats']

======================================================================
TEST 2: Auto Endpoint Structure
======================================================================

ðŸ“‹ AutoQueryRequest fields:
   - query: <class 'str'>
   - student_id: typing.Optional[str]
   - session_id: typing.Optional[str]
   - conversation_history: typing.List[fastapi_service.routers.auto.ConversationMessage]
   - stream: <class 'bool'>

ðŸ“‹ AutoQueryResponse fields:
   - selected_mode: <class 'str'>
   - confidence: <class 'float'>
   - reasoning: <class 'str'>
   - should_confirm: <class 'bool'>
   - response_data: typing.Dict[str, typing.Any]
   - is_follow_up: <class 'bool'>
   - mode_switch_count: <class 'int'>
   - execution_time_ms: <class 'float'>
   - timestamp: <class 'str'>

âœ… Request/Response models are properly defined

======================================================================
TEST 3: Orchestrator Classification
======================================================================
ðŸŽ¯ Orchestrator: NAVIGATE mode (confidence=0.90)
   Reasoning: Information retrieval request (navigate_score=2)
   Follow-up: False, Mode switches: 0

ðŸ” Navigate Query: 'Find materials about neural networks'
   Mode: navigate
   Confidence: 0.90
   Reasoning: Information retrieval request (navigate_score=2)
ðŸŽ¯ Orchestrator: EDUCATE mode (confidence=0.90)
   Reasoning: Learning/tutoring request (educate_score=2)
   Follow-up: False, Mode switches: 0

ðŸŽ“ Educate Query: 'Explain how neural networks learn'
   Mode: educate
   Confidence: 0.90
   Reasoning: Learning/tutoring request (educate_score=2)

âœ… Orchestrator classification working

======================================================================
TEST SUMMARY
======================================================================
âœ… PASS: Router Import
âœ… PASS: Endpoint Structure
âœ… PASS: Orchestrator Classification

Total: 3/3 tests passed

======================================================================
Test Suite: test_educate_graph.py
Status: PASSED
======================================================================

======================================================================
EDUCATE GRAPH TESTS
======================================================================

======================================================================
TEST 1: Educate Graph Import
======================================================================
âœ… Educate graph imported successfully (no kmeans errors)
   Functions available: build_educate_graph, query_educate_mode

======================================================================
TEST 2: Educate Graph Nodes
======================================================================
âœ… Educate graph built successfully

ðŸ“Š Graph nodes:
   - __start__
   - understand_query
   - student_model
   - math_translate
   - pedagogical_plan
   - retrieve
   - add_context
   - quiz_generator
   - study_planner
   - interactive_format
   - generate_visualization

======================================================================
TEST 3: Visualization Node Pass-Through
======================================================================
âœ… Visualization node executes without errors
   State preserved: True
   No kmeans_viz added: True

======================================================================
TEST 4: Educate Mode Execution (Mock)
======================================================================
ðŸ”„ Executing educate graph with test query...
   Query: What is backpropagation?
ðŸ¤– Initializing LLM: gemini / gemini-2.0-flash (temp=0.3)
âœ… Graph executed to completion
   Response present: True

======================================================================
TEST SUMMARY
======================================================================
âœ… PASS: Graph Import
âœ… PASS: Graph Nodes
âœ… PASS: Visualization Pass-Through
âœ… PASS: Graph Execution

Total: 4/4 tests passed

======================================================================
Test Suite: test_navigate_brief_summary.py
Status: PASSED
======================================================================

======================================================================
NAVIGATE BRIEF SUMMARY TESTS
======================================================================

======================================================================
TEST 1: Formatting Prompt Structure
======================================================================
ðŸ“ Checking FORMATTING_PROMPT...
âœ… FORMATTING_PROMPT includes 'brief_summary' field

   Context around brief_summary:
    Output JSON:
    {{
>>>   "brief_summary": "One concise sentence answering the query (15-20 words)...",
      "answer": "Clear, direct answer using markdown...",
      "is_in_scope": true/false,

======================================================================
TEST 2: Fallback Response Structure
======================================================================
ðŸ” Testing in-scope fallback...
âœ… In-scope fallback includes brief_summary
   Value: 'No specific course materials found for this query.'

ðŸ” Testing out-of-scope fallback...
âœ… Out-of-scope fallback includes brief_summary
   Value: 'No specific course materials found for this query.'

======================================================================
TEST 3: Auto Router Response Data
======================================================================
âœ… auto.py includes brief_summary in response_data

   Found at line 187:
                
                # Ensure proper structure for frontend
                if isinstance(formatted_data, str):
>>>                 formatted_data = {"answer": formatted_data, "brief_summary": "", "top_results": [], "related_topics": []}
                
                response_data = {
                    "formatted_response": formatted_data.get("answer", formatted_data.get("encouragement", "Here are relevant materials.")),

======================================================================
TEST 4: Navigate Response Structure
======================================================================
ðŸ”„ Processing test query with formatting agent...
ðŸ¤– Initializing LLM: gemini / gemini-2.0-flash [NAVIGATE] (temp=0.2)

ðŸ“‹ Response structure:
   âœ… brief_summary: True
   âœ… answer: True
   âœ… is_in_scope: True
   âœ… top_results: True
   âœ… related_topics: True

âœ… All required fields present in response
   Brief summary preview: 'Gradient descent is an optimization algorithm, covered in Week 3, used to minimi...'

======================================================================
TEST SUMMARY
======================================================================
âœ… PASS: Formatting Prompt
âœ… PASS: Fallback Responses
âœ… PASS: Auto Router Integration
âœ… PASS: Response Structure

Total: 4/4 tests passed

======================================================================
Test Suite: test_agent_traces.py
Status: PASSED
======================================================================

======================================================================
AGENT TRACE TESTS
======================================================================

======================================================================
TEST 1: Navigate Graph Trace Support
======================================================================
âœ… Navigate graph imported with trace support
   _wrap_agent_with_trace function available
âœ… Trace wrapper working (captured 2 traces)
   Sample trace: {'agent': 'test_agent', 'action': 'Testing trace wrapper', 'status': 'in_progress', 'timestamp': '2025-10-07T23:29:08.506883'}

======================================================================
TEST 2: Auto Router Trace Collection
======================================================================
   trace_callback present: True
   agent_traces variable: True
   trace collection logic: True
âœ… Auto router has trace collection infrastructure

   Found trace_callback at line 175:
                # Collect agent traces for execution plan
                agent_traces = []
                def trace_callback(trace):
                    agent_traces.append(trace)
                
                workflow_result = navigate_workflow.invoke({
                    "query": req.query,
                    "chroma_db": chroma_db,
                    "trace_callback": trace_callback
                })

======================================================================
TEST 3: Traces in Response Data
======================================================================
   Navigate mode includes agent_traces: True
   Educate mode includes agent_traces: True
âœ… Both modes include agent_traces in response_data

======================================================================
TEST 4: Trace Format
======================================================================
   Captured 2 traces

   Trace structure:
      agent: test_agent
      action: Performing test action
      status: in_progress
      timestamp: 2025-10-07T23:29:08.507092

âœ… Trace format correct with all required fields

======================================================================
TEST SUMMARY
======================================================================
âœ… PASS: Navigate Graph Trace Support
âœ… PASS: Auto Router Trace Collection
âœ… PASS: Traces in Response Data
âœ… PASS: Trace Format

Total: 4/4 tests passed

======================================================================
Test Suite: test_interactive_formatting.py
Status: PASSED
======================================================================

======================================================================
INTERACTIVE FORMATTING TESTS
======================================================================

======================================================================
TEST 1: No Placeholder Text
======================================================================
âœ… No placeholder text found

======================================================================
TEST 2: Fallback Interactive Structure
======================================================================

   Checking response structure...
âœ… All required fields present
   - type: interactive
   - interaction_type: direct_explanation
   - answer length: 92 chars
   - content length: 92 chars
   - sections: 1
âœ… Answer and content have substantial text

======================================================================
TEST 3: All Formatters Have Answer Field
======================================================================

   Testing scaffolded_hints...
ðŸ¤– Initializing LLM: gemini / gemini-2.5-flash [EDUCATE] (temp=0.3)
      âœ… Has answer and content fields
         Answer length: 121 chars
         Content length: 55 chars

   Testing direct_explanation...
ðŸ¤– Initializing LLM: gemini / gemini-2.0-flash (temp=0.3)
      âœ… Has answer and content fields
         Answer length: 4747 chars
         Content length: 4747 chars

   Testing fallback...
      âœ… Has answer and content fields
         Answer length: 77 chars
         Content length: 77 chars

======================================================================
TEST 4: Interaction Types
======================================================================
   Checking for interaction types...
      âœ… scaffolded_hints
      âœ… quiz
      âœ… worked_example
      âœ… socratic_dialogue
      âœ… concept_map
      âœ… direct_explanation

âœ… All 6 interaction types present

======================================================================
TEST SUMMARY
======================================================================
âœ… PASS: No Placeholder Text
âœ… PASS: Fallback Structure
âœ… PASS: All Formatters Have Answer
âœ… PASS: Interaction Types

Total: 4/4 tests passed
